Testing using Monkey that sends a pseudo-random stream of input events to the application. Testing using Monkey does not result in the wide coverage of the functionalities and activities. The lack of code coverage implies the previous work might have missed many of the new exceptions during evaluation which occurred due to transformation.

We use DroidBot which can generate UI-guided test inputs based on a state transition model generated on the fly. It also does not require any instrumentation of the application and achieves higher code coverage than Monkey. It easily identifies buttons on popups, etc. which decreases the chances of getting stuck on a single button layout and hence, result in wider code coverage. Another benefit is that it records the screenshot after every event along with execution logs, UI transition graph (UTG), etc. We use DroidBot to send input events to both transformed and original applications and record detailed information including system memory log, transformation logs, screenshot after each event, system logs (logcat), etc. 

We compare the logs collected for both original and transformed applications to find new exceptions, determine success rate, etc.  We also used perceptual hashing which is used to produce fingerprints of multimedia (i.e., images in our case) along with manual tests to compare the screenshots collected for each event in both transformed and original applications. Due to the model-based deterministic nature of inputs generated by DroidBot, the input events generated and the functionality path traversed in both original and transformed application remain the same. The reason to combine perceptual hashing with manual testing is due to the context and methodology of testing. We perform the testing for the transformed application first and then run the testing for the original application. The manual comparison compensates for the cases where random dynamic content is loaded into the application (internet-based resources), changes in time displayed in the application, etc. The screenshot based comparison also allows looking for the traces of implementation of malformed UI based protection mechanism suggested in literature in real-world applications against repackaging attacks, i.e., a mechanism which distorts the application view at runtime on repackaging detection to discourage users from using the application.


`Scripts/` folder contains a number of scripts with inline comments that was used to run a number of automatic tests on a huge number of applications for evaluation purpose. Due to extended information collection, we could also accurately detect how many applications contained any kind of repackaging detection and response capability. 
